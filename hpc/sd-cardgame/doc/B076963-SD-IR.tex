\documentclass[12pt,a4paper,tightenlines]{article}
\usepackage{epcc}
\usepackage{listings}
\usepackage[margin=2.3cm]{geometry}
%\renewcommand{\familydefault}{\sfdefault}
\usepackage[utf8]{inputenc}
\usepackage{url}
\usepackage{caption}
\usepackage{multicol}
\usepackage{graphicx}
\usepackage{multirow}
\usepackage{colortbl}
\usepackage{tikz}
\usepackage{hyperref}
\usetikzlibrary{shapes, arrows}


% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal

% Custom colors
\definecolor{codegreen}{rgb}{0,0.65,0}
\definecolor{codegray}{rgb}{0.65,0.65,0.65}
\definecolor{codepurple}{rgb}{0.658,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize\ttfamily,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
 
\lstset{style=mystyle}

\begin{document}
\title{Software Development\\Coursework 3: Improvement and Reflection}
\author{Exam no. B076963}
\date{}
\makeEPCCtitle
\tableofcontents
\listoftables
\newpage
\section{Introduction}
Prior to the commencement of this project, we have created a proposal for
a plan of the process of restructuring a poorly designed code for a simple
card game, including potential risks and estimation of time and effort
required for this code alongside other commitments.
Outlined herein are thoughts on the development process of restructuring
said code and how the actual process corresponded with the 
initial plan. We also present changes made to this code and how the 
implementation of these changes affected the development process, as 
well as potential future enhancements to the code that are at present
outside the scope of the development and what risks would be carried by
implementing these enhancements.

\section{Repository access and build instructions}
The Git repository for the project is public but it is hosted under a
privately hosted instance of GitLab, which is available at 
\texttt{\href{http://git.138.io/atar/public.git}{http://git.138.io/atar/public.git}}\\
Run the following command to clone the repository.
\begin{lstlisting}
git clone http://git.138.io/atar/public.git

\end{lstlisting}

The root directory of this project is accessible via the following 
path.
\begin{lstlisting}
cd public/hpc/sd-cardgame
\end{lstlisting}

There are two main subdirectories here; one for the code and another for 
the documentation of the code, including a list of changes, some ideas
of future implementations and some thoughts on the process.

In order to test the file, run the following script in the \texttt{code}
directory 
\begin{lstlisting}
./play_dbc.sh
\end{lstlisting}

\section{Improvement and Reflection}
\subsection{Reflection on Process}
As stated in the development plan, the highest risk was predicted to be
the refactoring of the code, which was confirmed in the process
of development. Quite a significant amount of effort was put into 
trying to understand how to implement the suggested ideas and create
the most suitable object-oriented design. This extended development time
from what was hoped to be a rather small amount of time to almost
half of the required time for the entire project.

One such issue that hindered
the development process was the treatment of the function that would load
in the JSON data. In the end, the best idea was to create a class called
Data that contains the JSON loader function. While there may be a 
significantly more streamlined solution, for the time being it is
sufficient for our purposes.

Another issue that persisted in the coding process was creating
coherent tests for the code. While in a lot of cases it seemed sufficient
to put the asserts equal to some expected value in the output, this
is not general enough for a non-specific use case for the function
that the test was written for. This does not affect the way the 
program itself is executed.

An addition to the code has caused an issue that may affect the portability of the game,
which added a further unexpected risk to the process. This was adding
the function to clear the shell for text output, brought in by the
\texttt{os} package. The line that clears the screen will work for 
UNIX-based operating systems but not on Windows, due to there being
a difference in the command to clear the shell. This may need 
investigation on a solution that would be platform agnostic. However,
since the requirement was that the platform to run on was Linux-based,
this should not affect our desired result.
\subsection{Summary of Changes}
For a concise list of changes, see \texttt{docs/changelog.md}
The major changes are outlined below.
\begin{table}[!ht]
    \begin{tabular}{|c|m{10cm}|}
        \hline
        Change & Description\\
        \hline
        OO Design of code & OO is ideal for a game project like this,
        since that makes it easier to identify what code would run 
        each component of the game, such as a card being an object,
        a pile of cards being an object, the players, the game board,
        the game itself, and so on. The code base has been changed from
        a single file to a package that contains the game code.\\
        \hline
        Input and text & Card input and text strings are now handled
        as input from a file. This reduces the amount of hard-coded
        elements in the code and makes it easier to make
        changes or additions to game assets, i.e., all you have to
        do is add a line to the JSON document\\
        \hline 
        Text output & The text output is made clearer by clearing the
        game screen for each move. While not a perfect solution, it
        does significantly clean up the interface and make obvious
        what moves are performed by each player\\
        \hline
        Surrender option & Before there was no option for the player
        to leave the game during the game other than killing the process.
        Now it is easy for the player to leave the game before it 
        finishes if they wish to.\\
        \hline
        Shell script executable & \texttt{play\_dbc.sh} is now 
        included to simply execute the main script in the game
        directory. This is a simple solution to having an executable
        to run the code. The scrips also cleans the directory after
        the game finishes from Python byte code that is created
        upon execution of the package.\\
        \hline
    \end{tabular}
    \caption{Table of changes and their impact on the code.}
\end{table}


\newpage
\subsection{Future Enhancement}
For a concise list of changes, see \texttt{docs/future.md}
\begin{table}[!ht]
    \begin{tabular}{|c|m{10cm}|c|}
        \hline
        Change & Description & Risk\\
        \hline
        GUI & We have started on a mockup of a graphical user interface
        in Qt4. For a project like this it would not be difficult
        to extend the already existing code and write some more
        methods to implement a graphical user interface. Some risks are 
        involved in this, of course, where some functions would need to be
        rewritten so that they are usable with Qt4. Another options would
        be to either implement ASCII art or a ncurses UI& 
        \cellcolor{red!50}High \\
        \hline
        Multiplayer/PvP & It is possible to have an option at the 
        beginning of the game to choose between playing with a bot
        and playing with a human opponent. What that would entail
        is changing the declaration of the player in the code and
        prompting the players to pass the client running the program
        to each other between each turn. The risk associated with this
        would require restructuring of the bot functions and the 
        Bot class to be encapsulated, in order to make the code easier
        to use for different game cases. & \cellcolor{yellow!50} Medium\\
        \hline
        Bot & Following on from the previous suggestion, the bot code was,
        admittedly, written in a hurry. While the code works as is, 
        it would be a better idea to have the bot operate 
        stand-alone, and while a skeleton code exists for a Bot
        class, it is not populated. & \cellcolor{red!50} High\\
        \hline
        Card Class & At the moment the Card class is superfluous, and
        is only used to access card values quickly. Perhaps it could
        be removed and have the Pile, Player, and Game classes pass around
        dictionaries from the imported JSON file, rather than an abstract 
        object. This should have very little impact on how the program
        presents itself.& \cellcolor{green!50} Low\\
        \hline
    \end{tabular}
    \caption{Table of possible future enhancements.}
\end{table}

\subsection{Lessons}
\subsubsection{Time awareness}
In order to make most of the time given to complete the project, it is crucial
to be aware of available tools prior to commencement of the project, especially
given the robust tools that are provided by every source control system. For example,
near the middle of the project, the developer had started utilising the issue tracking
functionality of GitLab for major issues that he had found during development. This
was useful for identifying what needs looking over in the code for improvement, as
well as for taking a step back and looking at the code from a different perspective.

\subsubsection{Risks}
It is preferable to identify what the developer is capable of achieving given his
existing skills. Although the developer has achieved what he had planned for the
project, there was too much time spent on parts of the code that could have been
done faster were they better designed or planned prior to attempting an implementation.
This will hinder the possibility of poor code creeping into the project, which would
lead to fewer problems in development and reducing the need to redesign a part of the
code after it is scheduled to be completed. In short, more generous time scales should
be given when estimating parts that one is unsure of in order to avoid making decisions
that would impact the risks of a project.

\subsubsection{Development models}
Admittedly, the project had a poor start and the development model that was employed
had closely resembled the "code-like-hell" model. Closer to the middle of the project,
the developer had found himself disconcerted by this and switched to a more coherent
development model, that somewhat resembled Evolutionary Prototyping, where new methods
were introduced to a barely working prototype of the code, progressively increasing in
robustness. This was a significantly more coherent approach to writing the code and 
had increased the developer's confidence in writing a well-working code base.

\subsubsection{Project structure}
Committing to the master branch may work reasonably well for small projects like this one,
but in future projects, feature branches should be utilised in order to keep track of
what parts of the project are complete and what parts still require work, merging
everything to master once that feature is fully implemented.

\section{Conclusion}
What we have been able to achieve is a testable, portable, (mostly) reusable,
and modular code base for the provided deck building card game. While the
code works as intended, with proposed changes implemented, it may be looking
further into what could be done about overly long and complex methods
and cleaning up modules that may be superfluous.

%\bibliography{bibi}{}
%\bibliographystyle{plain}
\end{document}
